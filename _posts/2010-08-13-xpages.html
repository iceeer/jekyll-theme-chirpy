---
layout: post
status: publish
published: true
title: XPages
author:
  display_name: iceeer
  login: iceeer
  email: superuser@xystoy.com
  url: ''
author_login: iceeer
author_email: superuser@xystoy.com
wordpress_id: 515
wordpress_url: http://iceeer.huiq.org/?p=515
date: '2010-08-13 12:42:20 +0800'
date_gmt: '2010-08-13 04:42:20 +0800'
categories:
- 开发
- Domino/Notes
tags:
- Domino
- java
- XPage
comments: []
---
<p><strong>在XPage中调用Java</strong><br />
1.打开"Pacage Explorer"视图<br />
2.找到数据库对应项目，新建"Source Folder",文件夹路径：WebContentWEB-INFsource<br />
3.在创建的文件夹中建Java类<br />
4.服务器JS代码：<br />
importPackage(lotus.domino);<br />
var j:TestJava = new TestJava();<br />
//var j:lotus.domino.TestJava = new lotus.domino.TestJava();<br />
j.testFunction();</p>
<p><del datetime="2010-07-03T15:33:58+00:00"><br />
<strong>Dojo不支持IE8解决</strong><br />
添加XPage页面"beforeRenderResponse"事件</del></p>
<p><del datetime="2010-07-03T15:33:58+00:00">try {<br />
if (context.getUserAgent().isIE(8, 8)) {<br />
var exCon = facesContext.getExternalContext();<br />
var response = exCon.getResponse();<br />
response.setHeader("X-UA-Compatible", "IE=EmulateIE7");<br />
}<br />
} catch (e) {<br />
}</del>（8.5.1已解决）<br />
<strong></strong></p>
<p><strong>设置dojo使用版本</strong><br />
xsp.properties file<br />
xsp.client.script.dojo.version = 1.3.2</p>
<p>xsp.client.script.libraries=none 不使用dojo</p>
<p><strong>服务器Dojo版本</strong></p>
<p>会从dominojsdojo文件夹自动判断最高的版本作为默认dojo版本</p>
<p>注意：dominojsdojo-1.5.1.rar 这种压缩包也会被识别，会把xpage使用的dojo转到这个压缩文件，会出现问题</p>
<p><strong><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/validation-on-an-xpage.htm" target="_blank">XPage输入验证</a></strong></p>
<p><a href="http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=982B853206340272852578CB0066C499">Writing Your Own Complex Custom Validator -- JSF Style</a></p>
<p><strong>XPage本地化</strong></p>
<p><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/UsingLocalizationOptions.htm">XPages: How to use the localization options</a></p>
<p><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPageLocaleTimezone.htm">Locale use in XPages</a></p>
<p><a title="XPage 事件（Events）" href="http://iceeer.huiq.net/?p=824"><strong>XPage 事件</strong></a></p>
<p><a title="XPage全局变量与方法" href="http://iceeer.huiq.net/?p=868">XPage全局变量与方法</a></p>
<p><strong>选择视图项</strong><br />
var viewPanel=getComponent("viewPanel1");get the componet of viewPanel<br />
var docIDArray=viewPanel.getSelectedIds(); get the array of document ids<br />
for(i=0;<br />
i < docIDArray.length;<br />
i++){<br />
var docId=docIDArray[i];<br />
var doc=database.getDocumentByID(docId);<br />
.. your code to deal with the selected document<br />
}</p>
<p><strong>xsp.propertys</strong></p>
<p><strong>xsp.partial.update.timeout</strong> 部分更新运行最长时间（秒）（8.5.2）</p>
<p>---临时的解决方案：</p>
<p><xp:scriptBlock id="scriptBlock1"><xp:scriptBlock id="scriptBlock1"><xp:this.value><![CDATA[XSP.addOnLoad(function(){// change submitLatency to 2 seconds (defaults to 6 seconds):XSP.submitLatency = 5 * 1000;&nbsp;alert(XSP.submitLatency);});]]></xp:this.value></xp:scriptBlock></p>
<p>---也可以在单独的XPage里设置</p>
<p><?xml version="1.0" encoding="UTF-8"?><br />
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">&nbsp;<xp:this.properties>&nbsp;<xp:parameter name="xsp.partial.update.timeout" value="3"></xp:parameter>&nbsp;</xp:this.properties></xp:view></p>
<p><strong>xsp.upload.maximumsize</strong>=1024 最大上传大小（KB）</p>
<p><strong>xsp.compress.mode</strong>=gzip 压缩模式</p>
<p><strong>xsp.html.doctype</strong>=<!DOCTYPE html> 设置doctype</p>
<p><strong><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Master_Table_of_Contents_for_XPages_Extensibility_APIs_Developer_Guide">XPage扩展API开发</a></strong></p>
<p><strong><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_a_Java_Control_in_an_NSF">XPage Java控件</a></strong></p>
<p><a title="XPage XSP对象" href="/?p=1526">XPage XSP对象</a></p>
<p><strong>加载XPage库（8.5.3+）</strong></p>
<p>创建updatesite数据库（模版：updatesite.ntf）<br />
notes.ini添加 OSGI_HTTP_DYNAMIC_BUNDLES=updatesite.nsf<br />
tell http restart<br />
tell http osgi ss</p>
<p>链接：<a href="http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_Dojo" target="_blank">Work With Dojo</a></p>
<p><a href="http://www.ibm.com/developerworks/cn/lotus/tutorials/ls-ddxpages/index.html">在 Lotus Domino Designer 中利用 XPages 的威力</a></p>
<p><a href="http://www.redbooks.ibm.com/Redbooks.nsf/RedbookAbstracts/tips0769.html?Open">Best Practices for Building Web Applications for Domino 8.5.1</a><br />
<a href="http://www.jmackey.net/groupwareinc/johnblog/johnblog.nsf/d6plinks/GROC-7GAFVQ">Calling Java Methods directly from server side JavaScript</a><br />
<a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_Dojo_1.3.2_toolkit_in_the_Domino_8.5.1_Server_and_Notes_8.5.1_Client"><br />
XPages: Dojo 1.3.2 toolkit in the Domino 8.5.1 Server and Notes 8.5.1 Client</a></p>
<p><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_Domino_Object_Map_8.5.2">XPages Domino Object Map 8.5.2</a></p>
<p><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Server_Configuration_with_special_focus_on_clustering_and_other_new_settings_related_to_XPages_8.0_resources">Section VIII - Server Configuration and new settings related to XPages 8.x resources</a></p>
<p><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_configuration_file_format">XPages configuration file format</a></p>
<p><a href="http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_a_Basic_UI_Control_for_XPages">Creating a Basic UI Control for XPages</a></p>
<p><a href="http://www.wissel.net/blog/d6plinks/SHWL-878B9D">Meet the XSP object</a></p>

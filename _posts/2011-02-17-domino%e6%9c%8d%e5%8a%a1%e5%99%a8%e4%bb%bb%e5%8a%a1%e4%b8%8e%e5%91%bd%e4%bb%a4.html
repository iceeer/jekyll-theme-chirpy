---
layout: post
status: publish
published: true
title: Domino程序、服务器任务与命令
author:
  display_name: iceeer
  login: iceeer
  email: superuser@xystoy.com
  url: ''
author_login: iceeer
author_email: superuser@xystoy.com
wordpress_id: 567
wordpress_url: http://iceeer.huiq.org/?p=567
date: '2011-02-17 14:43:59 +0800'
date_gmt: '2011-02-17 06:43:59 +0800'
categories:
- 开发
- Domino/Notes
tags:
- Console
- Domino
- Server
- task
- 任务
- 控制台
- 服务器
comments: []
---
<p>Internet 服务IBM(R) Lotus(R) Domino(R) 服务器设置程序为 Internet 服务提供了下列选项：</p>
<p>Web 浏览器（HTTP Web 服务）</p>
<p>Internet 邮件客户机（SMTP、POP3 和 IMAP 邮件服务）</p>
<p>目录服务 (LDAP)高级 Domino 服务缺省情况下，在设置 Domino 服务器时将启用下列 Domino 服务（这些服务是 Domino 基础结构正常运行所必需的）：数据库复制器Mail Router代理管理器管理进程日历连接器日程安排管理器DOLS（Domino 脱机服务）</p>
<p>下面是可以启用的可选高级 Domino 服务器服务：</p>
<p><strong>DIIOP</strong> CORBA 服务</p>
<p><strong>DECS</strong>（Domino 企业连接服务）记帐HTTP ServerIMAP 服务器ISpyLDAP 服务器POP3 服务器远程调试服务器SMTP 服务器状态统计信息收集器Web 检索器附注 &nbsp;最好使用活动记录，而不要使用记帐服务。</p>
<p><strong>服务器控制器</strong></p>
<p>nserver -jc 运行服务器控制器、服务器和 Domino 控制台</p>
<p>nserver -jc -c 运行服务器控制器和服务器</p>
<p>nserver -jc -s 运行服务器控制器和 Domino 控制台</p>
<p>nserver -jc -c -s 只运行服务器控制器</p>
<p><strong>Router 路由</strong><br />
<strong>Replica 复制</strong><br />
<strong>Update 设计更新</strong></p>
<p><strong>AMgr 代理管理器</strong></p>
<p><strong>Cluster</strong> 群集</p>
<p>禁用Cluster：修改notes.ini 设置Server_Cluster_On=0 &nbsp; ServerTasks中去掉Cluster</p>
<p>打开names.nsf群集设置，将服务器从群集移除</p>
<p><strong>AdminP 管理进程</strong></p>
<p>tell adminp p a 处理所有新的和更改过的立即、时间间隔、每天和延迟的请求。</p>
<p><strong>CalConn</strong></p>
<p>Compact压缩</p>
<p>load compact -c &lt;数据库名&gt; 使用拷贝样式压缩</p>
<p>load compact -a &lt;数据库名&gt; 归档并从数据库中删除文档，然后压缩数据（有时压缩无效）</p>
<p><strong>Chronos&nbsp;</strong>对标记了每小时更新、每日更新或每周更新的全文本索引进行更新</p>
<p>禁用Chronos任务，使用Lotus Domino服务器的notes.ini文件并重启Domino:&nbsp;<span style="font-family: Courier;">DEBUG_DISABLE_CHRONOS=1</span></p>
<p>Event</p>
<p>Sched</p>
<p>Stats 统计</p>
<p>Maps</p>
<p>RnRMgr&nbsp;Rooms and Resources</p>
<p>DIIOP Java访问对象</p>
<p><a href="/?p=961">DAOS</a></p>
<p>LDAP</p>
<p>全文索引 关闭:设置UPDATE_NO_FULLTEXT=1 Index Update（Updall是Update的一次性运行版本）</p>
<p><strong>任务启动方式：</strong></p>
<p><em>show performance</em> 显示服务器性能事件(与修改note.ini配置Server_Show_Performance=1相同)</p>
<p>Domino命令输入方法<br />
1.Lotus Domino Server程序的控制台中输入命令<br />
2.Domino Administrator 服务器控制台输入命令<br />
3.输入多条命令：在Domino的Data目录（如果提示找不到文件就放在程序目录）新建一文本文件（比如：input.txt ），将命令写在文本文件中，然后在控制台输入</p>
<p><strong>使用IND文件批量处理多个文件：</strong></p>
<p>1.程序目录下创建mailfiles.ind，文件内容包含：</p>
<p>mailmail1.nsfmailmail2.nsf<strong>...</strong>mailmail25.nsf</p>
<p>2.运行：load convert -u -f mailfiles.ind * mail85.ntf</p>
<p><strong><span style="font-size: medium;">Console_Log</span></strong></p>
<p><span style="font-size: medium;"><span style="font-size: medium;">Stop Consolelog 停止控制台日记</span></span></p>
<p><span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: x-small;">Console_Log_Enabled=<em>1 启用控制台日记，0禁用</em></span></span></span></p>
<p><strong>tell</strong></p>
<pre>tell amgr run <em>databaseName.nsf</em> '<em>agentName</em>'
tell http quit
tell http restart</pre>
<p>tell http show thread state<br />
<span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: x-small;"><em>load updall names.nsf -R 重建索引</em></span></span></span></p>
<p><span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: x-small;"><em>load compact -c -daos on &lt;数据库名&gt;</em></span></span></span></p>
<p><strong><span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: x-small;">通过Administrator运行命令</span></span></span></strong></p>
<p><span style="font-size: medium;"><span style="font-size: medium;"><span style="font-size: x-small;">服务器-服务器任务 右边工具条操作</span></span></span><br />
<strong>定时任务</strong><br />
在Administrator-Configuration-Server-Program添加程序<br />
程序名：nserver<br />
命令行：-c "load fixup -f"<br />
注释：修复数据库</p>
<p><strong>错误处理</strong><br />
<strong>Router: Connection from server not used; Server not in local domain.</strong><br />
解决：链接文档中domain设置错误</p>
<p>链接：</p>
<p><a href="http://www-900.ibm.com/cn/support/faqhtmlfaq/1307011000017.htm">Domino服务器任务介绍</a></p>
<p><a href="http://oreilly.com/catalog/domino/chapter/ch13.html">Lotus Domino Administration in a Nutshell: Chapter 13: Domino Server Tasks and Console Commands</a></p>
<p><a href="http://www-10.lotus.com/ldd/dominowiki.nsf/dx/Indirect-files-maintenance">Using indirect files to run maintenance tasks</a></p>
